var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,a,c)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(c)for(var a of c(t))n.call(t,a)&&l(e,a,t[a]);return e};import{u as o,a as i,c as m,h as d,b as p,d as u,R as g,r as E,M as b,D as f,e as v,P as F}from"./vendor.d93122d4.js";const h=o,y=()=>i();var j,N;(N=j||(j={})).add="CART/ADD",N.remove="CART/REMOVE",N.settle="CART/SETTLE";const k=m(j.add),A=m(j.remove),O=u(p({cart:d({[k.toString()]:(e,c)=>{const r=c.payload,n=e.findIndex((e=>e.id===r.id));return n>=0?(e[n].count++,e):[...e,(l=s({},r),o={count:1},t(l,a(o)))];var l,o},[A.toString()]:(e,t)=>{const a=t.payload,c=e.findIndex((e=>e.id===a));return e[c].count>1?(e[c].count--,e):e.filter((e=>e.id!==a))}},[])}));const x=({product:e})=>{const t=y();return g.createElement("div",{className:"cart-product"},g.createElement("div",{className:"cart-content"},e.text),g.createElement("div",{className:"cart-actions"},g.createElement("div",null,`${e.price}*${e.count}`),g.createElement("button",{className:"cart-btn",onClick:()=>t(A(e.id))},"delete")))};const S=({product:e})=>{const t=y();return g.createElement("div",null,g.createElement("div",{className:"image",style:{backgroundImage:`url(${e.imageSrc})`}}),g.createElement("div",{className:"details"},g.createElement("div",{className:"content"},e.text),g.createElement("div",{className:"actions"},g.createElement("div",null,e.price),g.createElement("button",{className:"btn",onClick:()=>t(k(e))},"加入购物车"))))},w=()=>g.createElement(g.Fragment,null,[{id:0,text:"苹果",price:10.99,added:!1,count:0,imageSrc:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fp1.pcswz.cn%2Fnews%2F2017%2F0102%2Fd7c0d33c36bc61ca.jpg&refer=http%3A%2F%2Fp1.pcswz.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629349936&t=acfe45b06a67c3f42b0eeae83b5ac8ad"},{id:1,text:"香蕉",price:20.99,added:!1,count:0,imageSrc:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fphotocdn.sohu.com%2F20150730%2Fmp24931503_1438223553769_9.jpeg&refer=http%3A%2F%2Fphotocdn.sohu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629349970&t=c1db470a644cfe12f8ef8f6719666b08"},{id:2,text:"菠萝",price:20.99,added:!1,count:0,imageSrc:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.baike.soso.com%2Fp%2F20130929%2F20130929132513-1519591140.jpg&refer=http%3A%2F%2Fpic.baike.soso.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1629349985&t=15a38148fd8d2e99c09daaa1d5cc2245"}].map((e=>g.createElement(S,{key:e.id,product:e}))));const C=()=>{const[e,t]=E.exports.useState(!1),a=h((e=>e.cart)),c=g.createElement(b,null,a.map((e=>g.createElement(b.Item,{key:`${e.id}${e.text}`},g.createElement(x,{product:e})))),g.createElement(b.Divider,null),g.createElement(b.Item,{key:"buy",onClick:()=>{const e=a.reduce(((e,t)=>e+t.price*t.count),0);console.log(e)}},"购买"));return g.createElement(g.Fragment,null,g.createElement("div",{className:"header"},g.createElement("div",{className:"title"},"购物天堂"),g.createElement(f,{overlay:c,trigger:["click"],onVisibleChange:()=>t((e=>!e)),visible:e},g.createElement("a",{className:"ant-dropdown-link btn",onClick:e=>e.preventDefault()},"购物车"))),g.createElement("div",{className:"products"},g.createElement(w,null)))},I=()=>g.createElement(C,null);v.render(g.createElement(F,{store:O},g.createElement(I,null)),document.getElementById("root"));
